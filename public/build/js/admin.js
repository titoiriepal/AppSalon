let fechas=[];function iniciarApp(){conseguirFechasAPI(),iniciarBotonMostrar()}function iniciarBotonMostrar(){document.querySelectorAll(".boton-mostrar").forEach(e=>{e.addEventListener("click",(function(e){idDiv=e.target.dataset.idcita,identificador="#"+idDiv,divMostrar=document.querySelector(identificador),divMostrar.classList.toggle("ocultar")}))})}async function conseguirFechasAPI(){try{const e="http://localhost:33000/api/fechas",t=await fetch(e);iniciarFechas(await t.json())}catch(e){console.log(e)}}function iniciarFechas(e){const t=new Set(e.map(e=>e.split("-")[0])),n=document.getElementById("year");n.addEventListener("change",updateMonths()),t.forEach(e=>{n.add(new Option(e,e))}),fechas=e}function updateMonths(){const e=document.getElementById("year").value,t=new Set(fechas.filter(t=>t.startsWith(e)).map(e=>e.split("-")[1])),n=document.getElementById("mes");n.innerHTML="<option>Selecciona un mes</option>",t.forEach(e=>{n.add(new Option(getMonthName(e),e))}),document.getElementById("dia").innerHTML="<option>Selecciona un día</option>"}function updateDays(){const e=document.getElementById("year").value,t=document.getElementById("mes").value,n=document.getElementById("mostrarTipoCitas").value,o=new Set(fechas.filter(n=>n.startsWith(`${e}-${t}`)).map(e=>e.split("-")[2])),i=document.getElementById("dia");i.innerHTML="<option>Selecciona un día</option>",o.forEach(e=>{i.add(new Option(e,e))}),i.addEventListener("input",(function(){dia=i.value;const o=`${e}-${t}-${dia}`;window.location=`?fecha=${o}&tipoCitas=${n}`}))}function getMonthName(e){const t=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],n=parseInt(e)-1;return n>=0&&n<12?t[n]:"Mes inválido"}document.addEventListener("DOMContentLoaded",(function(){iniciarApp()}));