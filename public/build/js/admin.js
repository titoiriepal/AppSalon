let fechas=[];function iniciarApp(){conseguirFechasAPI()}async function conseguirFechasAPI(){try{const e="http://localhost:33000/api/fechas",n=await fetch(e);iniciarFechas(await n.json())}catch(e){console.log(e)}}function iniciarFechas(e){const n=new Set(e.map(e=>e.split("-")[0])),t=document.getElementById("year");t.addEventListener("change",updateMonths()),n.forEach(e=>{t.add(new Option(e,e))}),fechas=e}function updateMonths(){const e=document.getElementById("year").value,n=new Set(fechas.filter(n=>n.startsWith(e)).map(e=>e.split("-")[1])),t=document.getElementById("mes");t.innerHTML="<option>Selecciona un mes</option>",n.forEach(e=>{t.add(new Option(getMonthName(e),e))}),document.getElementById("dia").innerHTML="<option>Selecciona un día</option>"}function updateDays(){const e=document.getElementById("year").value,n=document.getElementById("mes").value,t=new Set(fechas.filter(t=>t.startsWith(`${e}-${n}`)).map(e=>e.split("-")[2])),o=document.getElementById("dia");o.innerHTML="<option>Selecciona un día</option>",t.forEach(e=>{o.add(new Option(e,e))}),o.addEventListener("input",(function(){dia=o.value;const t=`${e}-${n}-${dia}`;window.location="?fecha="+t}))}function getMonthName(e){const n=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],t=parseInt(e)-1;return t>=0&&t<12?n[t]:"Mes inválido"}document.addEventListener("DOMContentLoaded",(function(){iniciarApp()}));